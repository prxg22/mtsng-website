row()
  .row
    display: flex
    width: 100%
    flex-wrap: wrap

    > [class*="col-"]
      flex: 1

      &:first-child
        margin-left: 0
      &:last-child
        margin-right: 0

    {block}

container(config)
  +above(config.min)
    padding: 0 unit(config.m, px)
    margin: 0 auto
    width: unit(config.min, px)

col(n, breakpoint, config)
  .col-{breakpoint}-{n}
    gutter = config.g / 2
    max = n * (config.min - 2 * config.m) / config.c
    min =  max - config.g

    // max-width: unit(max, px)
    flex-basis: unit(min, px)
    margin: 0 unit(gutter, px)


col-offset(n, breakpoint, config)
  .col-offset-{breakpoint}-{n}
    gutter = config.g / 2
    max = n * (config.min - 2 * config.m) / config.c
    offset = max - config.g

    margin-left: unit(gutter + offset, px) !important



grid(configs)
  .container
    for breakpoint, config in configs
      container(config)

    +row()
      for breakpoint, config in configs
        +above(config.min)
          for n in 1..(config.c)
            col-offset(n, breakpoint, config)
            col(n, breakpoint, config)
          // for n in 1..(config.c)
